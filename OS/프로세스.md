# 프로세스 개요

- 프로그램은 실행되기 전까지는 보조기억장치에 있는 데이터 덩어리일 뿐이지만 보조기억 장치에 저장된 프로그램을 메모리에 적재하고 실행하는 순간 그 프로그램은 프로세스가 된다.
- 포그라운드 프로세스는 사용자가 보는 앞에서 실행되는 프로세스다.
- 백그라운드 프로세스는 사용자가 보지 못하는 뒤편에서 실행되는 프로세스다.

## 프로세스 제어 블록

- 운영체제는 프로세스 제어 블록(PCB)을 이용하여 빠르게 번갈아 수행되는 프로세스의 실행 순서를 관리하고 프로세스에 CPU를 비롯한 자원을 배분한다.
- 프로세스 제어 블록은 프로세스와 관련된 정보를 저장하는 자료 구조이다.
- PCB는 커널 영역에 생성된다.

### 프로세스 ID

- PID는 특정 프로세스를 식별하기 위해 부여하는 고유한 번호다.

### 레지스터 값

- 프로세스는 자신의 실행 차례가 돌아오면 이전까지 사용했던 레지스터의 중간값들을 모두 복원한다.

## 문맥교환

- 하나의 프로세스 수행을 재개하기 위해 기억해야 할 정보를 문맥이라고 한다.
- 하나의 프로세스 문맥은 해당 프로세스의 PCB에 표현되어 있다.
- 실행 문맥을 잘 기억해 두면 언제든 해당 프로세스의 실행을 재개할 수 있기 때문에 프로세스가 CPU를 사용할 수 있는 시간이 다 되거나 예기치 못한 상황이 발생하여 인터럽트가 발생하면 운영체제는 해당 프로세스의 PCB에 문맥을 백업한다.
- 기존 프로세스의 문맥을 PCB에 백업하고 새로운 프로세스를 실행하기 위해 문맥을 PCB로부터 복구하여 새로운 프로세스를 실행하는 것을 문맥 교환이라고 한다.
- 문맥 교환은 여러 프로세스가 끊임없이 빠르게 번갈아 가며 실행되는 원리이다.
- 문맥 교환을 너무 자주하면 오버헤드가 발생할 수 있기 때문에 문맥 교환이 자주 일어난다고 해서 좋은건 아니다.

## 프로세스의 메모리 영역

- 하나의 프로세스는 사용자 영역에 코드영역, 데이터 영역, 힙 영역, 스택 영역으로 나뉘어 저장된다.

### 코드 영역

- 코드 영역은 텍스트 영역이라고도 부른다.
- 코드, 기계어로 이루어진 명령어가 저장된다.
- 코드 영역은 읽기 전용 공간이다.

### 데이터 영역

- 데이터 영역은 잠깐 썼다가 없앨 데이터가 아닌 프로그램이 실행되는 동안 유지할 데이터가 저장되는 공간이다.
- 전역변수가 대표적이다.
- 코드 영역과 데이터 영역은 그 크기가 변하지 않는다.
- 크기가 고정된 영역이라는 점에서 정적 할당 영역이라고 한다.

### 힙 영역

- 프로그램을 만드는 사용자가 직접 할당할 수 있는 저장 공간이다.
- 프로그래밍 과정에서 힙 영역에 메모리 공간을 할당했다면 언젠가는 해당 공간을 반환해야한다.
- 메모리 공간을 반환하지 않는다면 할당한 공간은 메모리 내에 계속 남아 메모리 낭비를 초래하는데 이러한 문제를 메모리 누수라고 한다.

### 스택 영역

- 데이터를 일시적으로 저장하는 공간이다.
- 함수의 실행이 끝나면 사라지는 매개변수, 지역변수가 대표적이다.
- 힙영역과 스택영역은 실시간으로 그 크기가 변할 수 있기 때문에 동적 할당 영역이라고 부른다.

## 프로세스 상태

### 생성 상태

- 프로세스를 생성 중인 상태를 생성 상태라고 한다.
- 생성 상태를 거쳐 실행할 준비가 완료된 프로세스는 곧바로 실행되지 않고 준비 상태가 되어 CPU의 할당을 기다린다.

### 준비 상태

- 당장이라도 CPU를 할당받아 실행할 수 있지만 자신의 차례가 아니기에 기다리고 있는 상태이다.

### 실행 상태

- CPU를 할당받아 실행중인 상태를 의미한다.
- 실행상태인 프로세스는 할당된 일정 시간동안만 CPU를 사용할 수 있다.
- 프로세스가 할당된 시간을 모두 사용한다면 다시 준비 상태가 되고 실행 도중 입출력장치를 사용하여 입출력 장치의 작업이 끝날 때까지 기다려야 한다면 대기 상태가 된다.
