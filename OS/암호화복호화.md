# 암호 (Cryptography)

- 0 과 1로 이루어진 이진수 데이터를 수학적 계산을 통한 비트 변경을 수행하는 것을 말한다.
- 정상적인 데이터(평문)의 2진수 데이터를 `암호화`하는 과정으로 데이터를 변경하고 `복호화`라는 과정으로 통해 데이터를 원래대로 돌리는 기술을 의미한다.

# 암호 기술

- 중요한 정보를 읽기 어려운 값으로 변환하여 제 3자가 볼 수 없도록 하는 기술이다.
- 암호 기술을 이용하여 데이터 기밀성, 데이터 무결성, 인증 및 부인 방지 등의 기능을 제공할 수 있다.

## 암호화

- 사용자가 입력한 데이터를 알아볼수 없는 데이터로 변경하는 과정을 말한다.

## 복호화

- 암호화된 데이터를 정상적인 데이터로 변경하는 과정을 말한다.

### 암호화의 형태

### 단방향 암호

- 원래 데이터로 돌릴 수 없는 암호화 방식이다.(복호화 불가능한 방식)
- `해시 알고리즘`이 있다.
  - 암호화는 가능하지만 복호화는 불가능하다.
  - 데이터의 무결성을 검증한다.
    - 데이터가 허락된 사용자로 인해 수정이 제대로 이루어졌는지 허가되지 않은 사용자가 `무단으로 데이터를 조작했는지 여부`를보는 것이다.
- 예시로는 `사용자 로그인 할때 비밀번호 입력`
  - 처음 비밀번호를 설정할 때는 입력 받은 비밀번호에 대해서 해싱 함수를 통해 해시값으로 변환하고 DB에 저장한다. -> 다시 로그인할 때 입력한 비밀번호를 다시 해싱 함수를 통해 해시 값으로 변환한 다음 기존 DB에 저장되어 있는 해당 사용자의 비밀번호와 매칭해서 값과 일치하는지 여부를 확인한 후 정확한 비밀번호를 입력했는지 판정하는 구조로 구성된다.

### 양방향 암호

- 암호화 후에 다시 복호화가 가능한 암호화 방식이다.
- 암호화키, 복호화키를 요구한다.
- 알고리즘은 키의 성질에 따라 구분이 된다.
  - 대칭키 암호 알고리즘 : `DES`, `AES(현 미국 표준 방식): 보안성이 뛰어나다.`
  - 비대칭키 암호 알고리즘 : `RSA: 주로 적은 양의 데이터나 전자서명에 사용된다. AES보다 속도가 느리기 때문에 메시지 암호화에는 쓰이지 않고 키를 암호화하는데 사용된다.`, `DSA`
- 예시로는 전자 서명에 사용한다.

#### 대칭키 암호 알고리즘

- 비밀키라고 부른다.
- 동일한 키를 이용해서 암호화 복호화를 한다.
- 키가 공개될 경우 암호화와 복호화가 모두 가능해지기 때문에 보안에 철저해야 한다.
- 키 크기가 상대적으로 작고 암호 알고리즘 내부 구조가 단순하여 속도가 빠르다.

#### 비대칭키 암호 알고리즘

- 공개키라고 부른다.
- 서로 다른 키를 사용하여 암호화 복호화를 한다.
- 속도가 느리지만 유지 보수와 관리가 편한 장점이 있다.
- 암호화 복호화 키가 다르기 때문에 복호화하기 어렵다.

#### 해시

- 임의의 크기를 가진 데이터(Key)를 고정된 크기의 데이터(Value)로 변화시켜 저장하는 것이다.
- 해시값 자체를 index로 사용하기 때문에 평균 시간 복잡도가 O(1) 으로 매우 빠르다.
- 해시 테이블
  - key, value를 갖는 데이터 구조이다.
  - 해시 함수로 얻은 해시를 키로 활용하여 index로 사용하고 해당 index에 데이터를 저장하여 효율적인 검색을 위해 사용된다.
  - 순차 검색에 비해 검색 속도가 빠르다.
- 해시 함수
  - 임의의 길이의 데이터를 고정된 길이의 데이터로 매핑하는 함수다.
  - 함수니까 입력값이 같으면 출력값은 같다.
  - 해시 함수에 의해 얻어지는 값은 해시값, 해시코드, 간단하게 해시라고 한다.
  - 나머지 연산을 이야기 한다.
- 해시 알고리즘
  - SHA 시리즈(Secure Hash Algorithm)
    - 해시 값의 크기는 SHA 알고리즘에 따라오는 bit 수 만큼 달라진다.
    - 각 숫자에 맞는 비트 수의 해시 값이 출력된다.
  - MD5(Message Digest Algorithm)
    - 해시 값의 크기는 128bit, 32Byte다.
    - 어떠한 입력값을 받더라도 해시값은 일정한 크기를 유지한다.
    - 해시값은 입력 받은 데이터가 1bit라도 다르게 되면 전혀 다른 값을 나타낸다.
    - 무결성 검사에 사용된다.
- 데이터 중복 방지 및 보안을 위해 솔트(임의의 문자열)를 추가하여 해시값을 만들어 저장한다.
  - 솔트란 해시 함수를 돌리기 전에 원문에 임의의 문자열을 덧붙이는 것을 말한다.

#### 해시 충돌

- 다른 내용의 데이터가 같은 키를 가질때 이러한 상황을 해시 충돌이라고 한다.
- 같은 키 값을 갖는 데이터가 생긴다는 것은 특정 키의 버켓에 데이터가 집중된다는 뜻이다.
  - 너무 많은 해시 충돌은 해시테이블의 성능을 떨어뜨린다.
- 해시 충돌 해결 방법으로는
  - 체이닝
    - 버켓 내에 연결 리스트를 할당하여 버켓에 데이터를 삽입하다가 해시 충돌이 발생하면 링크드 리스트로 데이터들을 연결하는 방식이다.
    - 장점은 연결 리스트만 사용하면된다.
  - 개방 주소법
    - 해시 충돌이 일어나면 다른 버켓에 데이터를 삽입하는 방시이다.
    - 선형 탐색, 제곱 탐색, 이중 해시 방법이 있다.
    - 장점
      - 체이닝처럼 포인터가 필요없고 지정한 메모리 외 추가적인 저장공간도 필요없다.
      - 삽입, 삭제시 오버헤드가 적다.
      - 저장할 데이터가 적을 때 더 유리하다.

##### 해쉬와 암호화

공통점 : 암호화 기법이다.
차이점 : 해쉬는 단방향 암호화 기법이고 암호화(Encryption)은 양방향 암호화 기법이다.

##### 좋은 해시 함수

- 식별자들을 해시 테이블에서 **균등하게 분포(Uniformly distributed)** 시켜야 한다.
- Uniform Hash Function 균등 해시함수를 통해 만들수 있다.
  - 정수값(혹은 이진수)을 해시테이블의 인덱스에 매핑해주는 함수다.
  - Division 나머지 연산
- simple uniform hashing을 만족하는 함수다.
- 중복 없이 확률적으로 슬롯에 골고루 나눠지는 것이다.

##### 해시 예시

- 무결성 검사
  - 파일 다운로드 시 문제가 없는지 확인하는 용도로 사용한다.
  - 다운로드하는 파일이 일부라도 변경된 경우 checksum값이 달라진다.
